# Environment Configuration
environment:
  # Observation settings
  frame_size: 64  # Width and height of each frame
  frame_stack: 4  # Number of frames to stack

  # Physics settings
  dt: 0.1  # Time step in seconds
  max_velocity: 15.0  # Maximum velocity magnitude for agent (increased for better pursuit)
  max_acceleration: 1.5  # Maximum acceleration magnitude (increased for faster response)
  max_angular_velocity: 2.5  # Maximum turning rate (rad/s) - increased agility
  friction: 0.95  # Velocity damping factor

  # World bounds
  world_size: 100.0  # Size of the world (symmetric around origin)
  view_size: 30.0  # Square field of view size (half-width, replaces view_radius)

  # 2.5D / 3D Settings (for depth perception)
  depth_range: [10.0, 50.0]  # [min_depth, max_depth] in world units
  num_targets: 1  # Number of targets to track (multi-target capability)

  # Target settings
  target_brownian_std: 3.0  # Standard deviation of Brownian motion (increased for agility)
  target_evasion_strength: 1.5  # How strongly targets evade from agent (increased for aggressive evasion)
  target_max_speed_ratio: 0.9  # Target max speed as ratio of agent max speed (0.9 = 90%, very agile!)
  target_size: 4.0  # Base radius of target in world units (INCREASED for better visibility)

  # Agent settings
  agent_size: 1.5  # Radius of agent in world units

  # Episode settings
  max_steps: 500
  success_threshold: 9.0  # 30% of view_size (30.0 * 0.3 = 9.0) - inner square focus area

  # Reward settings
  reward_scale: 0.01  # Scale factor for distance-based reward

# PID Controller Configuration (for agent/pursuer)
pid:
  kp: 0.5  # Proportional gain
  ki: 0.01  # Integral gain
  kd: 0.2  # Derivative gain
  integral_limit: 10.0  # Anti-windup limit

# Target Evader PID Configuration (for target/evader)
target_evader:
  kp: 0.8  # Proportional gain (higher for aggressive evasion)
  ki: 0.02  # Integral gain
  kd: 0.3  # Derivative gain (higher for smooth maneuvers)
  escape_margin: 5.0  # Distance from FOV boundary to target
  randomness: 0.3  # Amount of random perturbation (0-1)

# Visual Detection Configuration (for PID controllers)
visual_detection:
  min_contour_area: 5  # Minimum target size in pixels (lowered for small targets)
  blur_kernel: 3  # Gaussian blur kernel size (smaller = less smoothing, better for tiny targets)

# Kalman Filter Configuration
kalman:
  # Process noise covariance
  process_noise_pos: 0.1
  process_noise_vel: 0.5

  # Measurement noise covariance
  measurement_noise: 2.0

  # Initial covariance
  initial_covariance: 10.0

# SAC Configuration
sac:
  # Network architecture
  cnn_features: [32, 64, 64]  # Conv layer channels
  cnn_kernels: [8, 4, 3]  # Kernel sizes
  cnn_strides: [4, 2, 1]  # Strides
  mlp_units: [256, 256]  # MLP hidden units

  # Training hyperparameters
  learning_rate: 3.0e-4
  buffer_size: 100000
  batch_size: 256
  gamma: 0.99  # Discount factor
  tau: 0.005  # Target network update rate
  alpha: 0.2  # Entropy coefficient (can be auto-tuned)

  # Training settings
  total_timesteps: 500000
  learning_starts: 10000
  train_freq: 1
  gradient_steps: 1

  # Evaluation
  eval_freq: 10000
  n_eval_episodes: 10

# Experiment Configuration
experiment:
  seed: 42
  n_runs: 5  # Number of runs for statistical significance
  save_dir: "results"
  render_eval: false
  record_video: true
  log_interval: 1000
